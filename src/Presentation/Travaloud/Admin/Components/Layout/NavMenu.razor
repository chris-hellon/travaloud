@implements IDisposable

@using Microsoft.Extensions.Localization
@inject IStringLocalizer<NavMenu> L

<MudNavMenu Bordered="true">
    <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Dashboard">@L["Dashboard"]</MudNavLink>

    <MudDivider/>

    @if (_canViewBookings)
    {
        <MudNavGroup Title="@L["Bookings"]" Expanded="@ShouldExpand("/bookings")" Icon="@Icons.Material.Filled.Payments">
            <MudNavLink Href="/bookings/tour-bookings" Match="NavLinkMatch.All">@L["Tour Bookings"]</MudNavLink>

            @if (_canViewProperties)
            {
                <MudNavLink Href="/bookings/property-bookings" Match="NavLinkMatch.All">@L["Property Bookings"]</MudNavLink>
            }
        </MudNavGroup>
    }

    <MudNavGroup Title="@L["Management"]" Expanded="@ShouldExpand("/management")" Icon="@Icons.Material.Filled.Web">
        @if (_canViewProperties)
        {
            <MudNavLink Href="/management/properties" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.LocationCity">
                @L["Properties"]
            </MudNavLink>
        }

        @if (_canViewTours)
        {
            if (_canViewTourDropdown)
            {
                <MudNavGroup Title="@L["Tours"]" Expanded="@ShouldExpand("/management/tours")" Icon="@Icons.Material.Filled.Route">
                    <MudNavLink Href="/management/tours" Match="NavLinkMatch.All">@L["Tours"]</MudNavLink>
                    <MudNavLink Href="/management/tours/tour-categories" Match="NavLinkMatch.All">@L["Categories"]</MudNavLink>

                    @if (_canViewTourGroups)
                    {
                        <MudNavLink Href="/management/tours/tour-groups" Match="NavLinkMatch.All">@L["Groups"]</MudNavLink>
                    }
                </MudNavGroup>
            }
            else
            {
                <MudNavLink Href="/management/tours" Icon="@Icons.Material.Filled.Route">
                    @L["Tours"]
                </MudNavLink>
            }
        }

        @if (_canViewDestinations)
        {
            <MudNavLink Href="/management/destinations" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.FlightTakeoff">
                @L["Destinations"]
            </MudNavLink>
        }

        @if (_canViewEvents)
        {
            <MudNavLink Href="/management/events" Match="NavLinkMatch.All"Icon="@Icons.Material.Filled.Event">
                @L["Events"]
            </MudNavLink>
        }

        @if (_canViewServices)
        {
            <MudNavLink Href="/management/services" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.MiscellaneousServices">
                @L["Services"]
            </MudNavLink>
        }

        @if (_canViewJobVacancies)
        {
            <MudNavLink Href="/management/job-vacancies" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.PostAdd">
                @L["Job Vacancies"]
            </MudNavLink>
        }

        @if (_canViewTravelGuides)
        {
            <MudNavLink Href="/management/travel-guides" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.NoteAdd">
                @L["Travel Guides"]
            </MudNavLink>   
        }

        @if (_canViewGallery)
        {
            <MudNavLink Href="/management/galleries" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Slideshow">
                @L["Galleries"]
            </MudNavLink>   
        }

        @if (_canViewPages)
        {
            <MudNavGroup Title="@L["Page Management"]" Expanded="@ShouldExpand("/management/page-management")" Icon="@Icons.Material.Filled.Pageview">
                <MudNavLink Href="/management/page-management/pages" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Book">@L["Pages"]</MudNavLink>
                <MudNavLink Href="/management/page-management/page-modals" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.AddAlert">@L["Page Modals"]</MudNavLink>
            </MudNavGroup>
        }
    </MudNavGroup>

    @if (_canViewEnquiries)
    {
        <MudNavGroup Title="@L["Enquiries"]" Expanded="@ShouldExpand("/enquiries")" Icon="@Icons.Material.Filled.Message">
            <MudNavLink Href="/enquiries/general-enquiries" Match="NavLinkMatch.All">@L["General"]</MudNavLink>
            <MudNavLink Href="/enquiries/tours-enquiries" Match="NavLinkMatch.All">@L["Tours"]</MudNavLink>

            @if (_canViewServices)
            {
                <MudNavLink Href="/enquiries/services-enquiries" Match="NavLinkMatch.All">@L["Services"]</MudNavLink>
            }
            
            @if (_canViewJobVacancies)
            {
                <MudNavLink Href="/enquiries/job-vacancies" Match="NavLinkMatch.All">@L["Job Vacancies"]</MudNavLink>
            }
        </MudNavGroup>
    }

    @if (_canViewPartners)
    {
        <MudNavLink Href="/partners" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Contacts">@L["Partners"]</MudNavLink>
    }

    @if (CanViewAdministrationGroup)
    {
        <MudDivider/>

        @if (_canViewUsers)
        {
            <MudNavLink Match="NavLinkMatch.Prefix" Href="/guests" Icon="@Icons.Material.Filled.Groups">@L["Guests"]</MudNavLink>
            <MudNavLink Match="NavLinkMatch.Prefix" Href="/staff" Icon="@Icons.Material.Filled.PeopleAlt">@L["Staff"]</MudNavLink>
        }

        @if (_canViewRoles)
        {
            <MudNavLink Href="/permissions" Icon="@Icons.Material.Filled.Lock">@L["Permissions"]</MudNavLink>
        }

        @if (_canViewTenants)
        {
            <MudNavLink Href="/tenants" Icon="@Icons.Material.Filled.GroupWork">@L["Tenants"]</MudNavLink>
        }
    }

    <MudDivider/>

    @* @if (_canViewSettings) *@
    @* { *@
    @*     <MudNavLink Href="/settings" Icon="@Icons.Material.Filled.Settings">@L["Settings"]</MudNavLink> *@
    @* } *@

    <MudNavLink Href="/account" Icon="@Icons.Material.Filled.ManageAccounts">@L["Account"]</MudNavLink>
    <MudNavLink Href="/logs" Icon="@Icons.Material.Filled.SecurityUpdateGood">@L["Logs"]</MudNavLink>
</MudNavMenu>